# 07. `Easy` æ‰‹å¯« Array.fill

## ğŸ”¸ é¡Œç›®æè¿°

å¯¦ä½œ `fill` å‡½å¼ï¼Œæ­¤å‡½å¼æ¥æ”¶å››å€‹åƒæ•¸ï¼š

- ä¸€å€‹é™£åˆ—
- è¦æ›¿æ›çš„ `value`
- `start` ç´¢å¼•
- `end` ç´¢å¼•

è©²å‡½å¼æœƒå¾ `start` åˆ° `end` ç´¢å¼• (åŒ…å« `start` ä½†ä¸åŒ…å« `end`) ä¾†æŠŠé™£åˆ—çš„å…ƒç´ æ›æˆ `value` ã€‚å¦‚æœæœªæä¾› `start` ç´¢å¼•ï¼Œå‰‡æ‡‰é è¨­ç‚º 0ã€‚å¦‚æœæœªæä¾› `end` ç´¢å¼•ï¼Œå‰‡å‰©é¤˜å…ƒç´ æœƒè¢«æ›¿æ›ç‚º `value`ã€‚

```javascript
fill([1, 2, 3], '*')
// => ['*', '*', '*']

fill([1, 2], '*', 2, 3)
// => [1, 2]

fill([1, 2, 3, 4, 5], '*', 1, -1)
// => [1, '*', '*', '*', 5]
```

## âœ¨ ä¸€é»å¿ƒå¾—

æ˜¨å¤©åƒåŠ å®Œ office hourï¼Œæ¶ˆåŒ–å¾Œå¾—åˆ°ä¸€å€‹éˆæ„Ÿæ˜¯**åˆ†æèˆ‡æ€è·¯**æ‡‰è©²è¦èƒ½ä¾åºæœ‰é€™äº›éƒ¨åˆ†ï¼Œå°±ç•¶ä½œçœŸçš„æ˜¯é¢è©¦æ™‚é‡åˆ°é€™å€‹æ‰‹å¯«é¡Œï¼š

- å•é¡Œé‡æ¸…ï¼šçœ‹å®Œé¡Œç›®å¾Œæœ‰æ²’æœ‰æƒ³åˆ°ä»€éº¼ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæˆ–ç¢ºèªæ˜¯å¦éœ€è€ƒæ…®æ›´é€²éšçš„ edge casesï¼Œé¿å…å¯¦ä½œå¾Œèª¤æœƒé¡Œç›®éœ€è¦çš„è¼¸å‡ºè€Œç™½åšå·¥
- æå‡ºæ¸¬è©¦æ¡ˆä¾‹ï¼šé€™ä¸€æ­¥çœ‹ç‹€æ³å¯æ”¾åœ¨é€™æˆ–æœ€å¾Œä¸€æ­¥ï¼Œé›–ç„¶æ²’ä»”ç´°ç ”ç©¶é TDDï¼Œä½†é€™å¹¾å¤©è§£é¡Œä¸‹ä¾†æˆ‘ç¿’æ…£å…ˆå®šç¾©æ¸¬è©¦æ¡ˆä¾‹ï¼Œç¢ºèªè¦æ»¿è¶³å“ªäº›åŸºæœ¬æ¸¬è³‡ï¼Œä»¥åŠéœ€è¦è€ƒæ…®å“ªäº› edge cases
- æå‡ºæ€è·¯ï¼šå¯¦éš›å¯« code å‰å…ˆç°¡å–®å£è¿°å¯èƒ½çš„åšæ³•ï¼Œè‹¥æ¯”è¼ƒè¤‡é›œçš„é¡Œç›®å¯èƒ½å¯ä»¥æ­é… tldrawã€FigJamã€Miro ç­‰ç·šä¸Šé›»å­ç™½æ¿æˆ– flow å·¥å…·è¡¨é”
- codingï¼šæœ€å¾Œä¸€æ­¥æ‰æ˜¯å¯¦éš›å°‡æ€è·¯å¯«æˆ codeï¼Œå¦‚æ­¤ä¹Ÿå¯ä»¥è®“é¢è©¦å®˜çŸ¥é“ä½ ä¸æ˜¯å€‹åœ¨é‚„æ²’é‡æ¸…éœ€æ±‚å°±é­¯è½é–‹ç™¼çš„äºº

ä½†å„˜ç®¡é€™æ¨£èªªï¼Œå€‹äººè¦ºå¾—å‰ä¸‰æ­¥å¦‚æœåœ¨é¢è©¦ä¸­é‚„æ˜¯ç›¡å¯èƒ½ç°¡æ½”æ‰¼è¦ï¼Œè‡ªå·±ç•¶é¢è©¦å®˜æ™‚æœ‰é‡éé¢è©¦è€…è¬›äº†å¿«åäº”åˆ†é˜ç¹å¥½å¹¾åœˆéƒ½é‚„æ²’é–‹å§‹åšï¼Œé›–ç„¶è¶Šè½è¶Šäº‚ä½†åªå¥½æ‰“æ–·ä»–ã€Œå…„å¼Ÿï¼Œä½ è¬›çš„æˆ‘å¤§æ¦‚æ‡‚ï¼Œä¸å¦‚å°±ç›´æ¥ coding å§ã€

ä»Šå¤©ä¾†ç”¨ä¸€é¡Œç°¡å–®çš„ç·´ç·´é€™å€‹æµç¨‹ã€‚

## ğŸ’­ åˆ†æèˆ‡æ€è·¯

### å•é¡Œé‡æ¸…

- ç†è§£é€™é¡Œæ˜¯æƒ³å¯¦ä½œ ES6 ä¸­çš„ Array.fill é€™å€‹åŸç”Ÿæ–¹æ³•å—ï¼Ÿ
- é€™å€‹æ–¹æ³•æœŸå¾…è¦ç›´æ¥å»æ”¹è®ŠåŸé™£åˆ—ä¸¦å›å‚³ï¼Ÿ
- value éœ€è¦è€ƒæ…®å„ç¨®å‹åˆ¥å—ï¼Ÿè‹¥ value èƒ½å‚³å…¥ object æ˜¯å¦ç”¨åŒä¸€å€‹ç‰©ä»¶å³å¯æˆ–æ˜¯éœ€è¦æ·±æ‹·è²ï¼Ÿ
- éœ€è¦è™•ç† startã€end å‚³å…¥ä¸ç‚º number çš„ç‹€æ³å—ï¼Ÿ
- startã€end å¯ç‚ºè² æ•¸çš„è©±ï¼Œè™•ç†æ–¹æ³•æ˜¯å¦åŒç¯„ä¾‹ä¸‰æˆ– Array.fill çš„å®šç¾©ç›´æ¥å°‡è² å€¼åŠ ä¸Š array.lengthï¼Ÿ
- è‹¥ startã€end ç‚ºè² æ•¸ï¼Œä¸”åŠ ä¸Š array.length å¾Œä»ç‚ºè² æ•¸è©²å¦‚ä½•è™•ç†ï¼Ÿ

### æå‡ºæ¸¬è©¦æ¡ˆä¾‹

æ ¹æ“šä»¥ä¸Šæœ‰æ€è€ƒåˆ°çš„é‚Šç•Œæ¢ä»¶ï¼Œç”¨å–®å…ƒæ¸¬è©¦ä¾†è¡¨é”æ¸¬è©¦æ¡ˆä¾‹ï¼š

```ts
describe('Array.fill', () => {
  it('should handle basic cases', () => {
    expect(fill([1, 2, 3], '*')).toEqual(['*', '*', '*']);
    expect(fill([1, 2], '*', 2, 3)).toEqual([1, 2]);
    expect(fill([1, 2, 3, 4, 5], '*', 1, -1)).toEqual([1, '*', '*', '*', 5]);
  });

  it('should return the original array', () => {
    const arr = [1, 2, 3];

    expect(fill(arr, '*')).toBe(arr);
  });

  it('should handle edge cases', () => {
    expect(fill([], '*')).toEqual([]);
    expect(fill([1, 2, 3], '*', 0, 0)).toEqual([1, 2, 3]);
    expect(fill([1, 2, 3], '*', 1, 1)).toEqual([1, 2, 3]);
    expect(fill([1, 2, 3], '*', -1, -1)).toEqual([1, 2, 3]);
    expect(fill([1, 2, 3, 4, 5], '*', 3, 1)).toEqual([1, 2, 3, 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -3)).toEqual([1, 2, '*', '*', '*']);
    expect(fill([1, 2, 3, 4, 5], '*', -3, -2)).toEqual([1, 2, '*', 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -5, -2)).toEqual(['*', '*', '*', 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -7, -2)).toEqual(['*', '*', '*', 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -7, -4)).toEqual(['*', 2, 3, 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -7, -5)).toEqual([1, 2, 3, 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', NaN, NaN)).toEqual([1, 2, 3, 4, 5]);
    expect(fill([1, 2, 3, 4, 5], '*', -20)).toEqual(['*', '*', '*', '*', '*']);
  });

  it('should handle objects by reference', () => {
    const arr = fill(Array(3), {});
    arr[0].hi = 'hi';

    expect(arr).toEqual([{ hi: 'hi' }, { hi: 'hi' }, { hi: 'hi' }]);
  });
});
```

å¾å‰ä¸€æ­¥çš„å•é¡Œé‡æ¸…å¯ä»¥çŸ¥é“é€™é¡Œèƒ½åšçš„è™•ç†åå»£ï¼Œå…ˆè§£é‡‹ä¸€ä¸‹æœ€å¾Œé è¨ˆå¯¦ä½œçš„å®šç¾©ï¼š

- åŒ Array.fill çš„å®šç¾©ï¼Œå…ˆç”¨ Array.fill è·‘éä¸€éç¢ºèªæ¸¬è©¦æ¡ˆä¾‹éƒ½æ­£ç¢ºé€šé
- ç•¶ end è¶…é array é•·åº¦æ™‚ï¼Œè¨­ç‚º array é•·åº¦
- ç•¶ array ç‚ºç©ºæ™‚ï¼Œä¸è™•ç†ç›´æ¥å›å‚³ array
- ç•¶ startã€end ç‚ºè² æ•¸æ™‚ï¼ŒåŠ ä¸Š array.length è™•ç†
- ç•¶ startã€end ç‚ºè² æ•¸æ™‚ï¼Œä¸”åŠ ä¸Š array.length è™•ç†å¾Œä»ç‚ºè² æ•¸ï¼Œå‰‡è¨­ç‚º 0
- ä¸åœ¨ç¯„åœå…§æˆ–ç´¢å¼•å€¼ç„¡æ•ˆä¾ç…§è¿­ä»£ç´¢å¼•å€¼è‡ªå‹•è™•ç†ç¯„åœ
- è‹¥ value ç‚º objectï¼Œä»¥åŒä¸€å€‹ä½å€çš„ç‰©ä»¶æ›¿æ›é™£åˆ—ä¸­çš„å€¼
- å›å‚³çš„é™£åˆ—ä½å€éœ€èˆ‡åŸé™£åˆ—ç‚ºåŒä¸€å€‹

### æå‡ºæ€è·¯

- å…ˆå°è¼¸å…¥å®šå‹åˆ¥ï¼š
  - `array` å¯ç‚ºä»»æ„å‹åˆ¥çš„é™£åˆ—
  - `value` å¯ç‚ºä»»æ„å‹åˆ¥
  - `start` èˆ‡ `end` ç‚º number ä¸¦åˆ†åˆ¥æœ‰é è¨­å€¼ç‚º 0 èˆ‡ array.length
- ç•¶ startã€end ç‚ºè² æ•¸æ™‚ï¼Œåˆ†åˆ¥å»åŠ ä¸Š array.lenght è™•ç†ï¼Œè‹¥ä»ç‚ºè² æ•¸å‰‡æ­¸ 0
- ç•¶ end è¶…é array é•·åº¦ï¼Œå‰‡å®šç‚ºé™£åˆ—é•·åº¦
- ç›´æ¥å° array ç”¨ start èˆ‡ end è¿­ä»£ï¼Œä¸¦ç”¨ value ç›´æ¥æ›¿ä»£ç›®æ¨™å€¼

### å¯¦ä½œ

```ts
const fill = <T, V>(array: (T | V)[], value: V, start = 0, end = array.length) => {
  // é¿å…å°åŸåƒæ•¸æ“ä½œï¼Œå¦å¤–å®£å‘Š state å­˜ startã€end
  const state = {
    start,
    end,
  };

  // start çš„è² æ•¸è™•ç†
  if (start < 0) {
    state.start += array.length;

    if (state.start < 0) {
      state.start = 0;
    }
  }

  // end çš„è² æ•¸è™•ç†
  if (end < 0) {
    state.end += array.length;

    if (state.end < 0) {
      state.end = 0;
    }
  }

  if (end > array.length) {
    state.end = array.length;
  }

  // å°åŸé™£åˆ—è¿­ä»£ä¸¦ç›´æ¥ä»¥ value å–ä»£ç›®æ¨™å€¼
  for (let i = state.start; i < state.end; i++) {
    array[i] = value;
  }

  // å›å‚³åŸé™£åˆ—
  return array;
};
```
